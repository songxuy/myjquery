<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
	<title>弹幕</title>
	<script src="script/jquery-3.1.1.min.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="css/dm.css">
</head>
<body>
<div class="boxDom" id="boxDom">
	<div class="idDom">
		<div class="content">
			<span class="title">说点什么:</span> 
			<input type="text" class="text" id="text"/>
			<button class="btn" id="btn">发射</button>
		</div>
	</div>
</div>
</body>
</html>
<script type="text/javascript">
	$(function(){
		//获取内容
		var boxDom=$('#boxDom');
		var top,right;
		var pagewidth=parseInt($(document).width());
		var pageheight=parseInt($(document).height());
		//生成元素
		$('#btn').bind("click",auto);//给按钮绑定方法
		document.onkeydown=function(){
			if(event.keyCode==13){
				auto();
			}
		}
		function auto(){
		var txt=$('#text').val();
		$('#text').val("");//清空内容
		var span=$('<span class="string"></span>')
		top=Math.floor(Math.random()*pageheight-200);
		span.css({'top':top,'right':-400,'color':getcolor()})
		span.text(txt);
		boxDom.append(span);
		//设置动画效果animate(css 样式 时间 执行完的回调函数)
		var spandom=$('#boxDom>span:last-child');//找到最后一个span
		spandom.animate({"right":pagewidth+300},10000,function(){
			//移除元素
			$(this).remove();
		})
		}
		//定义一个随机生成颜色
		function getcolor(){
			//#ffffff #ccccccc
			var color="#";
			var arr=['a','b','c','d','f','0','1','2','3','4','5','6','7','8','9'];
			for(var i=0;i<6;i++){
				color+=arr[Math.floor(Math.random()*15)];
			}
			return color;
		}
	})
</script>